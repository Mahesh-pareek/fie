:root{--bg:#0d0d0f;--bg-light:#141418;--card:#1a1a1f;--card-hover:#222228;--muted:#d4d4d8;--muted-dim:#71717a;--accent:#3b82f6;--accent-hover:#60a5fa;--green:#10b981;--green-dim:#065f46;--red:#ef4444;--red-dim:#991b1b;--purple:#8b5cf6;--orange:#f59e0b;--yellow:#fbbf24;--border:rgba(255,255,255,0.08);--glow:rgba(59,130,246,0.15)}
*{box-sizing:border-box}
body{background:var(--bg);color:var(--muted);font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;margin:0;line-height:1.6}

/* Glass Card Effect */
.glass-card{background:linear-gradient(135deg,rgba(26,26,31,0.9),rgba(26,26,31,0.7));backdrop-filter:blur(10px);border:1px solid var(--border);box-shadow:0 4px 24px rgba(0,0,0,0.3),inset 0 1px 0 rgba(255,255,255,0.05)}

/* Loading Overlay */
.loading-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(13,13,15,0.95);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;z-index:100;border-radius:12px}
.loading-spinner{width:44px;height:44px;border:3px solid var(--border);border-top-color:var(--accent);border-radius:50%;animation:spin 0.8s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* Layout */
.app-root{display:flex;height:100vh}
.sidebar{width:240px;background:linear-gradient(180deg,var(--bg-light) 0%,var(--bg) 100%);padding:20px;border-right:1px solid var(--border);display:flex;flex-direction:column}
.sidebar .logo{font-weight:800;font-size:28px;margin-bottom:24px;background:linear-gradient(135deg,#fbbf24 0%,#f59e0b 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;letter-spacing:-1px}
.sidebar nav ul{list-style:none;padding:0;margin:0}
.sidebar nav li{padding:12px 14px;color:var(--muted-dim);cursor:pointer;border-radius:10px;margin-bottom:6px;transition:all 0.2s ease;font-weight:500}
.sidebar nav li:hover{background:var(--card);color:var(--yellow);transform:translateX(4px)}
.sidebar nav li.active{background:linear-gradient(135deg,var(--accent),#6366f1);color:white;box-shadow:0 4px 12px rgba(59,130,246,0.3)}
.sidebar nav a{color:var(--yellow);text-decoration:none;display:block}
.sidebar nav a:hover{color:#fcd34d}
.filters{margin-top:24px;flex:1}
.filters h4{margin:0 0 14px 0;font-size:11px;text-transform:uppercase;color:var(--muted-dim);letter-spacing:1px;font-weight:600}
.filters label{display:block;margin-bottom:12px;font-size:13px;font-weight:500}
.filters input,.filters select{width:100%;padding:10px 12px;border-radius:8px;border:1px solid var(--border);background:var(--bg);color:var(--muted);margin-top:6px;transition:all 0.2s}
.filters input:focus,.filters select:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px var(--glow)}
.sidebar-footer{padding-top:16px;border-top:1px solid var(--border);display:flex;flex-direction:column;gap:12px}
.version-info{display:flex;align-items:center;justify-content:space-between;font-size:12px;color:var(--muted-dim)}
.version-tag{background:var(--card);padding:4px 8px;border-radius:4px;font-family:'SF Mono',monospace;font-size:11px}
.github-link{color:var(--muted-dim);text-decoration:none;transition:color 0.2s}
.github-link:hover{color:var(--accent)}

.main{flex:1;display:flex;flex-direction:column;overflow:hidden;background:var(--bg)}
.topbar{height:64px;display:flex;align-items:center;justify-content:space-between;padding:0 24px;background:var(--bg-light);border-bottom:1px solid var(--border)}
.brand{font-weight:700;font-size:18px;color:white}
.actions{display:flex;gap:12px}
.container{padding:24px;overflow-y:auto;flex:1;background:linear-gradient(180deg,var(--bg) 0%,#0a0a0c 100%)}

/* Buttons */
.btn-sm{padding:8px 14px;border-radius:8px;border:1px solid var(--border);background:transparent;color:var(--muted);cursor:pointer;font-size:13px;font-weight:500;transition:all 0.2s}
.btn-sm:hover{background:var(--card);border-color:var(--muted-dim);transform:translateY(-1px)}
.btn-sm.active{background:linear-gradient(135deg,var(--accent),#6366f1);color:white;border-color:transparent;box-shadow:0 2px 8px rgba(59,130,246,0.3)}
.btn-outline{padding:10px 18px;border-radius:8px;border:1px solid var(--border);background:transparent;color:var(--muted);cursor:pointer;font-weight:500;transition:all 0.2s}
.btn-outline:hover{background:var(--card);border-color:var(--muted-dim)}
.btn-accent{padding:10px 18px;border-radius:8px;border:none;background:linear-gradient(135deg,var(--accent),#6366f1);color:white;cursor:pointer;font-weight:600;transition:all 0.2s;box-shadow:0 2px 8px rgba(59,130,246,0.3)}
.btn-accent:hover{transform:translateY(-1px);box-shadow:0 4px 12px rgba(59,130,246,0.4)}
.btn-close{position:absolute;top:12px;right:12px;background:transparent;border:none;color:var(--muted);font-size:20px;cursor:pointer;transition:transform 0.2s}
.btn-close:hover{transform:rotate(90deg)}

/* Upload Zone */
.upload-zone{position:relative;background:var(--card);border:2px dashed var(--border);border-radius:16px;padding:48px;text-align:center;margin-bottom:24px;transition:all 0.3s}
.upload-zone.dragover{border-color:var(--accent);background:rgba(59,130,246,0.1);transform:scale(1.01)}
.upload-content{display:flex;flex-direction:column;align-items:center;gap:14px}
.upload-icon{font-size:56px;filter:grayscale(0.3)}
.upload-zone input[type="file"]{position:absolute;inset:0;opacity:0;cursor:pointer}
.upload-progress{width:100%;max-width:320px}
.progress-bar{height:6px;background:var(--bg);border-radius:3px;overflow:hidden}
.progress-fill{height:100%;width:0;background:linear-gradient(90deg,var(--accent),var(--purple));transition:width 0.3s}

/* Dashboard Header - Compact */
.dashboard-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding:12px 0}
.header-left{display:flex;align-items:center;gap:16px}
.header-right{display:flex;align-items:center;gap:12px}
.quick-insight{font-size:13px;color:var(--muted);padding:8px 14px;background:var(--card);border-radius:8px;border:1px solid var(--border)}
.quick-insight strong{font-weight:600}
.insight-up{color:var(--green)}
.insight-down{color:var(--red)}

/* Compact Period Toggle */
.period-toggle.compact{display:flex;gap:4px;background:var(--card);padding:4px;border-radius:10px;border:1px solid var(--border)}
.period-toggle.compact .period-btn{padding:6px 12px;font-size:12px;border-radius:6px;border:none;background:transparent}
.period-toggle.compact .period-btn.active{background:linear-gradient(135deg,var(--accent),#6366f1);color:white}

/* Data Health Bar - Transactions Page */
.data-health-bar{display:flex;align-items:center;gap:16px;margin-bottom:16px;padding:10px 16px;background:var(--card);border-radius:10px;border:1px solid var(--border);flex-wrap:wrap}
.health-stat{display:flex;align-items:center;gap:6px;font-size:13px;color:var(--muted)}
.health-stat strong{color:white;font-weight:600}
.health-stat .health-icon{font-size:14px}
.health-stat .health-icon.good{color:var(--green)}
.health-stat.warning .health-icon{color:var(--yellow)}
.health-action{padding:6px 12px;font-size:12px;border-radius:6px;border:1px solid var(--border);background:transparent;color:var(--muted);cursor:pointer;transition:all 0.2s;display:flex;align-items:center;gap:6px}
.health-action:hover{background:var(--accent);color:white;border-color:var(--accent)}

/* Summary Row */
.summary-row{display:flex;gap:20px;margin-bottom:24px;align-items:stretch}
.chart-box{background:var(--card);padding:20px;border-radius:16px;width:300px;height:300px;flex-shrink:0;border:1px solid var(--border);position:relative}
.chart-title{font-size:12px;text-transform:uppercase;letter-spacing:1px;color:var(--muted-dim);margin-bottom:8px;font-weight:600}
.chart-box canvas{position:absolute;top:48px;left:20px;right:20px;bottom:20px;width:calc(100% - 40px)!important;height:calc(100% - 68px)!important}
.cards{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;flex:1}

/* Modern Gradient Cards */
.card{background:var(--card);padding:20px;border-radius:14px;display:flex;align-items:flex-start;gap:14px;border:1px solid var(--border);transition:all 0.25s ease;position:relative;overflow:hidden}
.card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;opacity:0.8}
.card:hover{transform:translateY(-4px);box-shadow:0 12px 24px rgba(0,0,0,0.3)}
.card-icon{font-size:32px;filter:drop-shadow(0 2px 4px rgba(0,0,0,0.2))}
.card-content{display:flex;flex-direction:column;gap:2px}
.card-label{font-size:11px;color:var(--muted-dim);text-transform:uppercase;letter-spacing:0.5px;font-weight:600}
.card-value{font-size:24px;font-weight:700;color:white;letter-spacing:-0.5px}
.card-sub{font-size:11px;color:var(--muted-dim);margin-top:2px}
.card-sub.trend-up{color:var(--green)}
.card-sub.trend-down{color:var(--red)}
.credit-splits{color:var(--accent);font-weight:500}
.credit-deposits{color:var(--green);font-weight:500}

.card-gradient-blue{border-color:rgba(59,130,246,0.3)}
.card-gradient-blue::before{background:linear-gradient(90deg,var(--accent),#6366f1)}
.card-gradient-red{border-color:rgba(239,68,68,0.3)}
.card-gradient-red::before{background:linear-gradient(90deg,var(--red),#f97316)}
.card-gradient-green{border-color:rgba(16,185,129,0.3)}
.card-gradient-green::before{background:linear-gradient(90deg,var(--green),#22d3d1)}
.card-gradient-purple{border-color:rgba(139,92,246,0.3)}
.card-gradient-purple::before{background:linear-gradient(90deg,var(--purple),#ec4899)}

/* Dashboard Grid */
.dashboard-grid{display:grid;grid-template-columns:2fr 1fr;gap:20px}
@media(max-width:1200px){.dashboard-grid{grid-template-columns:1fr}}

/* Trend Section */
.trend-section{border-radius:16px;padding:20px;border:1px solid var(--border)}
.trend-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
.trend-header h3{margin:0;font-size:16px;font-weight:600}
.trend-toggle{display:flex;gap:8px}
.trend-chart-box{height:220px;position:relative}
.trend-chart-box canvas{width:100%!important;height:100%!important}

/* Recent Transactions */
.recent-section{border-radius:16px;padding:20px;border:1px solid var(--border)}
.recent-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
.recent-header h3{margin:0;font-size:16px;font-weight:600}
.view-all-link{font-size:13px;color:var(--accent);text-decoration:none;font-weight:500;transition:color 0.2s}
.view-all-link:hover{color:var(--accent-hover)}
.recent-list{display:flex;flex-direction:column;gap:10px}
.recent-item{display:flex;align-items:center;gap:12px;padding:12px;background:var(--bg);border-radius:10px;transition:all 0.2s}
.recent-item:hover{background:var(--card-hover)}
.recent-icon{width:36px;height:36px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:16px}
.recent-icon.debit{background:rgba(239,68,68,0.15);color:var(--red)}
.recent-icon.credit{background:rgba(16,185,129,0.15);color:var(--green)}
.recent-info{flex:1;min-width:0}
.recent-name{font-size:13px;font-weight:500;color:white;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.recent-cat{font-size:11px;color:var(--muted-dim)}
.recent-amount{font-size:14px;font-weight:600;text-align:right}
.recent-amount.negative{color:var(--red)}
.recent-amount.positive{color:var(--green)}
.recent-empty{text-align:center;padding:24px;color:var(--muted-dim);font-size:13px}

/* Transactions */
.txns{background:var(--card);border-radius:16px;padding:20px;border:1px solid var(--border)}
.txns-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;flex-wrap:wrap;gap:12px}
.txns-header h2{margin:0;font-size:20px;font-weight:600;color:white}
.active-filters{display:flex;gap:8px;flex-wrap:wrap}
.filter-pill{background:linear-gradient(135deg,var(--accent),#6366f1);color:white;padding:5px 12px;border-radius:20px;font-size:12px;display:flex;align-items:center;gap:6px;font-weight:500}
.filter-pill button{background:none;border:none;color:white;cursor:pointer;padding:0;font-size:14px;opacity:0.8;transition:opacity 0.2s}
.filter-pill button:hover{opacity:1}
table{width:100%;border-collapse:separate;border-spacing:0 4px;font-size:14px}
th{text-align:left;padding:12px 14px;color:var(--muted);font-weight:600;text-transform:uppercase;font-size:11px;letter-spacing:0.5px;background:transparent}
th.sortable{cursor:pointer;transition:color 0.2s}
th.sortable:hover{color:var(--accent)}
td{padding:14px;background:var(--bg);vertical-align:middle}
tr td:first-child{border-radius:8px 0 0 8px}
tr td:last-child{border-radius:0 8px 8px 0}
tr{transition:all 0.15s}
tr:hover td{background:var(--card-hover)}
tr.selected td{background:rgba(59,130,246,0.2)}
.table-footer{padding-top:14px;font-size:13px;color:var(--muted-dim);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:12px}
#loadMoreBtn{padding:10px 20px;font-size:14px;background:var(--card);border:1px solid var(--border);color:var(--muted);cursor:pointer;border-radius:8px;transition:all 0.2s}
#loadMoreBtn:hover{background:var(--card-hover);color:white;border-color:var(--accent)}
#loadMoreBtn:disabled{opacity:0.5;cursor:not-allowed}

/* Table Cell Styles */
.amount-cell{font-family:'SF Mono','Fira Code',monospace;font-weight:700;font-size:15px}
.amount-cell.debit{color:#ff6b6b}
.amount-cell.credit{color:#51cf66}
.counterparty-cell{color:white;font-weight:500}
.counterparty-info{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.scope-tag{background:rgba(59,130,246,0.15);color:var(--accent);padding:4px 10px;border-radius:6px;font-size:12px;font-weight:500}
.category-cell{color:var(--muted);font-size:13px;max-width:120px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.date-cell{color:var(--muted);font-size:13px;white-space:nowrap}
.actions-cell{text-align:right;white-space:nowrap}
.actions-cell .action-group{display:inline-flex;gap:6px;align-items:center}

.editBtn,.noteBtn,.ruleBtn,.deleteBtn{padding:6px 10px;border-radius:6px;cursor:pointer;font-size:12px;font-weight:600;transition:all 0.2s;border:1px solid transparent}
.editBtn{background:var(--accent);color:white;border-color:var(--accent)}
.editBtn:hover{background:var(--accent-hover);transform:translateY(-1px)}
.noteBtn{background:transparent;color:var(--yellow);border-color:rgba(251,191,36,0.3)}
.noteBtn:hover{background:var(--yellow);color:#000}
.noteBtn.has-note{background:rgba(251,191,36,0.2)}
.ruleBtn{background:transparent;color:var(--purple);border-color:rgba(139,92,246,0.3)}
.ruleBtn:hover{background:var(--purple);color:white}
.deleteBtn{background:transparent!important;color:var(--red)!important;border-color:rgba(239,68,68,0.3)!important;padding:6px 10px!important}
.deleteBtn:hover{background:var(--red)!important;color:white!important}

/* Modal */
.modal{position:fixed;inset:0;background:rgba(0,0,0,0.8);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:100}
.modal-content{background:var(--card);padding:28px;border-radius:16px;width:440px;border:1px solid var(--border);box-shadow:0 24px 48px rgba(0,0,0,0.4)}
.modal-content h3{margin:0 0 20px 0;font-size:18px}
.modal-row{margin-bottom:14px}
.modal-row label{display:block;font-size:13px;font-weight:500}
.modal-row input,.modal-row select{width:100%;padding:12px;border-radius:8px;border:1px solid var(--border);background:var(--bg);color:var(--muted);margin-top:8px;transition:all 0.2s}
.modal-row input:focus,.modal-row select:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px var(--glow)}
.modal-actions{display:flex;gap:12px;justify-content:flex-end;margin-top:24px}
.modal-wide{width:560px;max-width:90vw}

/* Toast Notifications */
.toast{position:fixed;bottom:24px;right:24px;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:14px 20px;display:flex;align-items:center;gap:12px;z-index:1000;box-shadow:0 8px 24px rgba(0,0,0,0.4);transform:translateY(100px);opacity:0;transition:all 0.3s ease}
.toast.show{transform:translateY(0);opacity:1}
.toast-success{border-left:3px solid var(--green)}
.toast-success .toast-icon{color:var(--green)}
.toast-error{border-left:3px solid var(--red)}
.toast-error .toast-icon{color:var(--red)}
.toast-info{border-left:3px solid var(--accent)}
.toast-info .toast-icon{color:var(--accent)}
.toast-icon{font-size:16px;font-weight:700}
.toast-message{font-size:14px;color:var(--muted)}

/* Danger Button */
.btn-danger{padding:8px 14px;border-radius:8px;border:1px solid var(--red);background:transparent;color:var(--red);cursor:pointer;font-size:13px;font-weight:500;transition:all 0.2s}
.btn-danger:hover{background:var(--red);color:white}

/* Status Badges */
.status-badge{display:inline-flex;align-items:center;gap:4px;padding:5px 10px;border-radius:6px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:0.3px}
.status-reviewed{background:rgba(16,185,129,0.2);color:#51cf66}
.status-unreviewed{background:rgba(251,191,36,0.2);color:#fbbf24}

/* Direction Badges */
.dir-badge{display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:8px;font-size:14px;font-weight:600}
.dir-badge.debit{background:rgba(239,68,68,0.2);color:#ff6b6b}
.dir-badge.credit{background:rgba(16,185,129,0.2);color:#51cf66}

/* Shortcuts Panel */
.shortcuts-panel{position:fixed;bottom:24px;right:24px;background:var(--card);border:1px solid var(--border);border-radius:16px;padding:20px;width:260px;z-index:99;box-shadow:0 12px 24px rgba(0,0,0,0.3)}
.shortcuts-panel h4{margin:0 0 14px 0;font-size:14px;font-weight:600}
.shortcuts-panel ul{list-style:none;padding:0;margin:0 0 14px 0}
.shortcuts-panel li{display:flex;justify-content:space-between;padding:6px 0;font-size:13px}
.shortcuts-panel kbd{background:var(--bg);padding:3px 8px;border-radius:6px;font-family:'SF Mono',monospace;font-size:11px;border:1px solid var(--border)}

/* Login Page */
.login-page{display:flex;align-items:center;justify-content:center;min-height:100vh;background:linear-gradient(135deg,var(--bg) 0%,#0f172a 100%)}
.login-container{width:100%;max-width:420px;padding:24px}
.login-box{background:var(--card);padding:40px;border-radius:20px;border:1px solid var(--border);box-shadow:0 24px 48px rgba(0,0,0,0.4)}
.login-logo{font-size:56px;font-weight:800;text-align:center;margin-bottom:8px;background:linear-gradient(135deg,#fff 0%,var(--accent) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.login-box h2{text-align:center;font-size:14px;color:var(--muted-dim);margin:0 0 32px 0;font-weight:400}
.login-box label{display:block;margin-bottom:20px;font-weight:500}
.login-box input{width:100%;padding:14px 16px;border-radius:10px;border:1px solid var(--border);background:var(--bg);color:var(--muted);margin-top:8px;font-size:14px;transition:all 0.2s}
.login-box input:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px var(--glow)}
.login-box .btn-primary{width:100%;padding:14px;border-radius:10px;border:none;background:linear-gradient(135deg,var(--accent),#6366f1);color:white;font-size:15px;font-weight:600;cursor:pointer;margin-top:12px;transition:all 0.2s;box-shadow:0 4px 12px rgba(59,130,246,0.3)}
.login-box .btn-primary:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(59,130,246,0.4)}
.login-hint{text-align:center;font-size:12px;color:var(--muted-dim);margin-top:20px}
.error-msg{color:var(--red);font-size:13px;margin-bottom:10px;min-height:22px}

/* Responsive */
@media (max-width: 1024px){
  .sidebar{width:200px}
  .cards{grid-template-columns:1fr}
  .summary-row{flex-direction:column}
  .chart-box{width:100%;height:240px}
}
@media (max-width: 768px){
  .sidebar{display:none}
  .summary-row{flex-direction:column}
  .chart-box{width:100%;height:220px}
  .insights-banner{flex-direction:column}
}

/* Views */
.view{display:block;position:relative;min-height:200px}

/* Budget Section */
.budget-section{border-radius:16px;padding:20px;margin-bottom:24px;border:1px solid var(--border)}
.budget-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px}
.budget-header h3{margin:0;font-size:15px;font-weight:600}
.budget-amount{font-size:14px;font-weight:600;color:white}
.budget-bar{height:10px;background:var(--bg);border-radius:5px;overflow:hidden}
.budget-fill{height:100%;background:linear-gradient(90deg,var(--green),var(--accent));transition:width 0.5s;border-radius:5px}
.budget-fill.warning{background:linear-gradient(90deg,var(--orange),var(--red))}
.budget-footer{display:flex;justify-content:space-between;margin-top:10px;font-size:12px;color:var(--muted-dim)}

/* Analytics Sections */
.analytics-section{background:var(--card);border-radius:12px;padding:20px;margin-bottom:20px;border:1px solid var(--border)}
.section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
.section-header h3{margin:0;font-size:18px}
.section-badge{padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;text-transform:uppercase}
.section-badge.personal{background:var(--accent);color:white}
.section-toggle{font-size:12px;color:var(--muted-dim);transition:transform 0.2s}
.collapsible .section-header{cursor:pointer}
.collapsible .section-header:hover{opacity:0.8}
.collapsible.collapsed .section-toggle{transform:rotate(-90deg)}
.collapsible.collapsed .section-content{display:none}
.section-content{animation:fadeIn 0.2s}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}

.charts-row{display:flex;gap:16px;margin-top:16px}
.chart-container{background:var(--bg);border-radius:10px;padding:16px;flex:1;position:relative}
.chart-container.half{flex:0 0 calc(50% - 8px)}
.chart-container h4{margin:0 0 12px 0;font-size:14px;color:var(--muted)}
.chart-container canvas{width:100%!important;height:200px!important}

/* Chart Header with Date Range */
.chart-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px;flex-wrap:wrap;gap:12px}
.chart-header h4{margin:0;font-size:14px;color:var(--muted)}
.date-range-picker{display:flex;flex-direction:column;gap:8px;align-items:flex-end}
.quick-ranges{display:flex;gap:4px}
.range-btn{background:transparent;border:1px solid var(--border);color:var(--muted);padding:4px 10px;border-radius:4px;font-size:11px;cursor:pointer;transition:all 0.15s}
.range-btn:hover{border-color:var(--accent);color:var(--accent)}
.range-btn.active{background:var(--accent);border-color:var(--accent);color:white}
.custom-range{display:flex;align-items:center;gap:8px}
.custom-range span{color:var(--muted);font-size:12px}
.date-input{background:var(--card);border:1px solid var(--border);color:white;padding:6px 10px;border-radius:4px;font-size:12px}
.date-input:focus{border-color:var(--accent);outline:none}

/* Chart Type Toggle */
.chart-type-toggle{display:flex;gap:4px;margin-bottom:12px}
.chart-type-btn{background:transparent;border:1px solid var(--border);color:var(--muted);padding:4px 12px;border-radius:4px;font-size:11px;cursor:pointer;transition:all 0.15s}
.chart-type-btn:hover{border-color:var(--accent);color:var(--accent)}
.chart-type-btn.active{background:var(--accent);border-color:var(--accent);color:white}

/* Chart Scroll Container for many data points */
.chart-scroll-container{position:relative;overflow-x:auto;overflow-y:hidden}
.chart-scroll-container canvas{min-width:100%}
.chart-info{font-size:11px;color:var(--muted-dim);text-align:center;margin-top:8px}

.stats-grid.compact{grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px}
.stat-card.mini{padding:12px}
.stat-card.mini .stat-row{padding:4px 0}

.top-list{font-size:13px}
.top-item{display:flex;justify-content:space-between;padding:4px 0;border-bottom:1px solid var(--border)}
.top-item:last-child{border-bottom:none}
.top-item span:first-child{color:var(--muted)}
.top-item span:last-child{font-weight:500;color:white}

/* Stats Grid */
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;margin-bottom:20px}
.stat-card{background:var(--card);border-radius:10px;padding:16px;border:1px solid var(--border)}
.stat-card h4{margin:0 0 12px 0;font-size:14px;color:var(--accent)}
.stat-row{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid var(--border)}
.stat-row:last-child{border-bottom:none}
.stat-row span:first-child{color:var(--muted-dim)}
.stat-row span:last-child{font-weight:600;color:white}

.stats-charts{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.stat-chart-box{background:var(--card);border-radius:10px;padding:16px;border:1px solid var(--border)}
.stat-chart-box h4{margin:0 0 12px 0;font-size:14px}
.stat-chart-box canvas{max-height:250px}

/* Settings */
.settings-section{max-width:800px}
.settings-section h2{margin:0 0 24px 0}
.settings-group{background:var(--card);border-radius:10px;padding:20px;margin-bottom:16px;border:1px solid var(--border)}
.settings-group h3{margin:0 0 16px 0;font-size:16px;color:var(--accent)}
.settings-group label{display:block;margin-bottom:12px}
.settings-group input[type="number"],.settings-group input[type="text"],.settings-group select{width:100%;max-width:300px;padding:10px;border-radius:6px;border:1px solid var(--border);background:var(--bg);color:var(--muted);margin-top:6px}
.settings-group input:focus,.settings-group select:focus{outline:none;border-color:var(--accent)}

.checkbox-label{display:flex!important;align-items:center;gap:10px;cursor:pointer}
.checkbox-label input[type="checkbox"]{width:18px;height:18px;accent-color:var(--accent)}

.tags-list{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:12px}
.tag-chip{background:var(--bg);padding:6px 12px;border-radius:16px;font-size:13px;display:flex;align-items:center;gap:6px}
.tag-chip button{background:none;border:none;color:var(--muted-dim);cursor:pointer;font-size:14px;padding:0}
.tag-chip button:hover{color:var(--red)}

.add-tag-row{display:flex;gap:8px}
.add-tag-row input{flex:1;max-width:200px}

.scopes-checkboxes{display:flex;flex-wrap:wrap;gap:12px;margin:8px 0}
.scopes-checkboxes label{display:flex;align-items:center;gap:6px;cursor:pointer;background:var(--bg);padding:6px 12px;border-radius:6px;font-size:13px}
.scopes-checkboxes input[type="checkbox"]{width:16px;height:16px;accent-color:var(--accent)}
.hint{font-size:12px;color:var(--muted-dim);margin-top:8px}
.hint kbd{background:var(--bg);padding:2px 6px;border-radius:4px;font-family:'SF Mono','Fira Code',monospace;font-size:11px;border:1px solid var(--border)}
.budget-scopes-section{margin-top:16px}
.budget-scopes-section>label{display:block;margin-bottom:8px;font-weight:500}

.settings-buttons{display:flex;gap:12px;flex-wrap:wrap}
.settings-actions{margin-top:20px}

/* Auto-Tagging Rules */
.rules-section{border:1px solid var(--accent);border-radius:10px}
.rules-header{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:12px}
.rules-header h3{margin:0}
.rules-actions{display:flex;gap:8px;flex-wrap:wrap}
.rules-list{margin:16px 0;max-height:400px;overflow-y:auto}
.rule-card{background:var(--bg);border:1px solid var(--border);border-radius:8px;padding:12px;margin-bottom:10px;display:flex;justify-content:space-between;align-items:center;gap:12px}
.rule-card.disabled{opacity:0.5}
.rule-info{flex:1}
.rule-name{font-weight:600;margin-bottom:4px;display:flex;align-items:center;gap:8px}
.rule-name .priority-badge{background:var(--accent);color:white;font-size:10px;padding:2px 6px;border-radius:10px}
.rule-conditions-display{font-size:12px;color:var(--muted-dim)}
.rule-actions-display{font-size:12px;margin-top:4px}
.rule-actions-display .tag{background:var(--accent);color:white;padding:2px 8px;border-radius:4px;font-size:11px;margin-right:4px}
.rule-controls{display:flex;gap:6px;align-items:center}
.rule-controls button{padding:4px 8px;font-size:11px}
.rule-toggle{width:40px;height:20px;background:var(--bg-light);border-radius:10px;position:relative;cursor:pointer;border:1px solid var(--border)}
.rule-toggle.active{background:var(--green)}
.rule-toggle::after{content:'';position:absolute;width:16px;height:16px;background:white;border-radius:50%;top:1px;left:1px;transition:0.2s}
.rule-toggle.active::after{left:21px}

/* Quick Add Merchant */
.quick-add-merchant{margin-top:20px;padding-top:16px;border-top:1px solid var(--border)}
.quick-add-merchant h4{margin:0 0 8px 0}
.merchant-autocomplete{position:relative}
.merchant-autocomplete input{width:100%;max-width:400px}
.suggestions-dropdown{position:absolute;top:100%;left:0;right:0;max-width:400px;background:var(--card);border:1px solid var(--border);border-radius:6px;max-height:250px;overflow-y:auto;display:none;z-index:100}
.suggestions-dropdown.show{display:block}
.suggestion-item{padding:10px 12px;cursor:pointer;display:flex;justify-content:space-between;border-bottom:1px solid var(--border)}
.suggestion-item:last-child{border-bottom:none}
.suggestion-item:hover{background:var(--card-hover)}
.suggestion-item .merchant-name{font-weight:500}
.suggestion-item .merchant-stats{font-size:12px;color:var(--muted-dim)}

/* Rules Defaults */
.rules-defaults{margin-top:20px;padding:16px;background:var(--card);border:1px solid var(--border);border-radius:8px}
.rules-defaults h4{margin:0 0 8px 0;color:var(--accent)}
.defaults-actions{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap}
.defaults-actions button{font-size:12px}

/* Rule Modal */
.modal-wide{width:500px;max-width:95vw}
.rule-conditions,.rule-actions-section{margin:16px 0;padding:12px;background:var(--bg);border-radius:8px}
.rule-conditions h4,.rule-actions-section h4{margin:0 0 12px 0;font-size:14px}
.condition-group{margin-bottom:12px}
.condition-group:last-child{margin-bottom:0}
.range-inputs{display:flex;align-items:center;gap:8px}
.range-inputs input{width:100px}
.range-inputs span{color:var(--muted-dim)}

/* Preview Modal */
.preview-list{max-height:300px;overflow-y:auto;margin:12px 0}
.preview-item{display:grid;grid-template-columns:1fr 80px 1fr 1fr;gap:8px;padding:8px;background:var(--bg);border-radius:6px;margin-bottom:6px;font-size:13px;align-items:center}
.preview-item .old{color:var(--red);text-decoration:line-through}
.preview-item .new{color:var(--green)}
.preview-item .rule-applied{color:var(--accent);font-size:11px}
.preview-count{text-align:center;padding:12px;background:var(--accent);border-radius:6px;color:white;font-weight:600;margin-bottom:12px}

/* Buttons */
.btn-danger{padding:8px 14px;border-radius:6px;border:none;background:var(--red);color:white;cursor:pointer;font-weight:500;transition:all 0.15s}
.btn-danger:hover{background:#c0392b}

/* Transaction actions */
.txns-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;flex-wrap:wrap;gap:10px}
.txns-actions{display:flex;align-items:center;gap:12px}

.deleteBtn{background:transparent;border:1px solid var(--red);color:var(--red);padding:4px 8px;border-radius:4px;cursor:pointer;font-size:11px}
.deleteBtn:hover{background:var(--red);color:white}

/* Section Headers */
.section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:12px}
.section-header h2{margin:0;font-size:20px;font-weight:600;color:white}
.header-actions{display:flex;gap:10px;align-items:center;flex-wrap:wrap}

/* Activity Logs */
.logs-section{padding:20px}
.logs-list{display:flex;flex-direction:column;gap:8px;margin-top:16px}
.log-item{display:flex;gap:12px;padding:12px 16px;background:var(--card);border-radius:8px;border:1px solid var(--border)}
.log-icon{width:28px;height:28px;display:flex;align-items:center;justify-content:center;border-radius:50%;background:var(--bg);font-size:14px}
.log-icon.log-upload{color:var(--green);background:rgba(16,185,129,0.1)}
.log-icon.log-edit{color:var(--accent);background:rgba(59,130,246,0.1)}
.log-icon.log-delete{color:var(--red);background:rgba(239,68,68,0.1)}
.log-icon.log-auto{color:var(--purple);background:rgba(139,92,246,0.1)}
.log-icon.log-restore{color:var(--green);background:rgba(16,185,129,0.1)}
.log-content{flex:1}
.log-details{color:#e0e0e0;font-size:14px}
.log-details strong{color:white}
.log-meta{color:var(--muted-dim);font-size:12px;margin-top:4px}

/* Rules Section Full */
.rules-section-full{padding:20px}
.rules-defaults-section,.quick-add-section,.rule-tester-section{margin-top:24px;padding:16px;background:var(--card);border-radius:8px;border:1px solid var(--border)}
.rules-defaults-section h3,.quick-add-section h3,.rule-tester-section h3{margin:0 0 8px 0;font-size:14px;color:white}

/* Rule Tester */
.rule-tester-section{border:1px solid var(--accent);background:rgba(59,130,246,0.05)}
.rule-tester-inputs{margin-top:12px}
.rule-tester-inputs .input-row{display:flex;gap:12px;align-items:flex-end;flex-wrap:wrap}
.rule-tester-inputs .input-group{display:flex;flex-direction:column;gap:4px;flex:1;min-width:150px}
.rule-tester-inputs .input-group label{font-size:12px;color:var(--muted);font-weight:500}
.rule-tester-inputs input,.rule-tester-inputs select{padding:10px 12px;background:var(--bg);border:1px solid var(--border);border-radius:6px;color:white;font-size:14px}
.rule-tester-inputs input:focus,.rule-tester-inputs select:focus{border-color:var(--accent);outline:none}
.rule-tester-result{margin-top:16px}
.test-result{display:flex;align-items:center;gap:12px;padding:14px;border-radius:8px}
.test-result.match{background:rgba(16,185,129,0.15);border:1px solid rgba(16,185,129,0.3)}
.test-result.no-match{background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.2)}
.test-result .match-icon{font-size:20px;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%}
.test-result.match .match-icon{background:rgba(16,185,129,0.2);color:var(--green)}
.test-result.no-match .match-icon{background:rgba(239,68,68,0.2);color:var(--red)}
.test-result .match-details{flex:1}
.test-result .match-rule{font-size:14px;color:white}
.test-result .match-actions{font-size:13px;color:var(--muted);margin-top:4px}
.test-result .match-actions .tag{background:var(--accent);color:white;padding:2px 8px;border-radius:4px;font-size:12px;margin-left:4px}

/* Create Rule Button */
.ruleBtn{background:transparent;border:1px solid var(--border);color:var(--yellow);padding:6px 10px;border-radius:6px;cursor:pointer;font-size:13px;transition:all 0.2s}
.ruleBtn:hover{background:var(--yellow);color:var(--bg);border-color:var(--yellow)}

/* Apply Options */
.apply-options{display:flex;align-items:center;gap:12px;padding:12px 16px;background:var(--card);border-radius:8px;border:1px solid var(--border);margin-bottom:16px}
.checkbox-label{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:14px;color:var(--muted)}
.checkbox-label input[type="checkbox"]{width:18px;height:18px;accent-color:var(--accent);cursor:pointer}
.apply-options .hint{font-size:12px;color:var(--muted-dim)}

/* Trash */
.trash-list{max-height:400px;overflow-y:auto}
.trash-item{display:flex;justify-content:space-between;align-items:center;padding:12px;background:var(--bg);border-radius:6px;margin-bottom:8px}
.trash-info{display:flex;flex-direction:column;gap:4px}
.trash-info strong{color:white;font-size:14px}
.trash-amount{font-size:13px}
.trash-amount.credit{color:var(--green)}
.trash-amount.debit{color:var(--red)}
.trash-date{font-size:11px;color:var(--muted-dim)}

/* Modal Transaction Info */
.modal-txn-info{background:var(--bg);padding:10px 12px;border-radius:6px;margin-bottom:16px;font-size:13px;color:var(--muted)}
.modal-txn-info strong{color:white}

/* Empty state */
.empty-state{text-align:center;padding:40px;color:var(--muted-dim)}

/* Help Page */
.help-section{padding:20px;max-width:900px}
.help-card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:24px;margin-bottom:20px}
.help-card h3{margin:0 0 16px 0;font-size:18px;color:white;display:flex;align-items:center;gap:8px}
.help-card h4{margin:16px 0 8px 0;font-size:14px;color:var(--accent);font-weight:600}
.help-card p{margin:8px 0;color:var(--muted);line-height:1.6}
.help-card .note{font-size:13px;color:var(--muted-dim);font-style:italic}

.help-steps{margin:0;padding-left:24px;color:var(--muted)}
.help-steps li{margin-bottom:12px;line-height:1.5}
.help-steps li strong{color:var(--accent)}

/* Metric explanations */
.metric-explain{padding:16px;background:var(--bg);border-radius:8px;margin-bottom:12px;border-left:3px solid var(--border)}
.metric-explain.highlight-red{border-left-color:var(--red)}
.metric-explain.highlight-green{border-left-color:var(--green)}
.metric-explain.highlight-purple{border-left-color:var(--purple)}
.metric-name{font-weight:600;color:white;font-size:15px;margin-bottom:8px}
.metric-desc{color:var(--muted);font-size:14px}
.metric-desc p{margin:6px 0}
.metric-list{margin:8px 0;padding-left:20px;color:var(--muted)}
.metric-list li{margin-bottom:6px}
.metric-list li strong{color:white}

/* Formula boxes */
.formula-box{background:#1e293b;border:1px solid rgba(59,130,246,0.3);border-radius:6px;padding:12px 16px;margin:12px 0;font-family:'Fira Code','Monaco',monospace}
.formula-box code{color:var(--accent);font-size:14px}

/* Two column layout */
.two-col{display:grid;grid-template-columns:1fr 1fr;gap:24px}
@media(max-width:768px){.two-col{grid-template-columns:1fr}}

/* Rule types */
.rule-types{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;margin-top:16px}
.rule-type{background:var(--bg);padding:16px;border-radius:8px}
.rule-type h4{margin:0 0 8px 0;color:white;font-size:14px}
.rule-type p{margin:0 0 8px 0;font-size:13px;color:var(--muted-dim)}

/* Example box */
.example-box{background:rgba(139,92,246,0.1);border:1px solid rgba(139,92,246,0.3);border-radius:6px;padding:12px;font-size:13px;color:var(--muted)}
.example-box strong{color:var(--purple)}
.example-box em{color:var(--muted-dim);display:block;margin-top:4px}

/* Tip boxes */
.tip-box{background:rgba(251,191,36,0.1);border:1px solid rgba(251,191,36,0.3);border-radius:8px;padding:14px;margin-top:16px;color:var(--muted)}
.tip-box strong{color:var(--yellow)}
.help-card.highlight-tip{border-color:rgba(251,191,36,0.3);background:linear-gradient(135deg,var(--card) 0%,rgba(251,191,36,0.05) 100%)}
.tip-list{margin:0;padding-left:20px;color:var(--muted)}
.tip-list li{margin-bottom:10px;line-height:1.5}
.tip-list li strong{color:var(--yellow)}
.tip-list kbd{background:var(--bg);border:1px solid var(--border);border-radius:4px;padding:2px 6px;font-size:12px;font-family:monospace;color:white}

/* Badges */
.badge-up{color:var(--green);font-weight:500}
.badge-down{color:var(--red);font-weight:500}
.badge-green{display:inline-block;background:rgba(16,185,129,0.2);color:var(--green);padding:2px 8px;border-radius:4px;font-size:13px}
.badge-red{display:inline-block;background:rgba(239,68,68,0.2);color:var(--red);padding:2px 8px;border-radius:4px;font-size:13px}
.badge-striped{display:inline-block;background:repeating-linear-gradient(45deg,rgba(239,68,68,0.1),rgba(239,68,68,0.1) 5px,rgba(239,68,68,0.2) 5px,rgba(239,68,68,0.2) 10px);color:var(--red);padding:2px 8px;border-radius:4px;font-size:13px}

/* Glossary */
.glossary{margin:0}
.glossary dt{font-weight:600;color:var(--accent);margin-top:12px;font-size:14px}
.glossary dt:first-child{margin-top:0}
.glossary dd{margin:4px 0 0 0;color:var(--muted);font-size:14px;padding-left:16px;border-left:2px solid var(--border)}

/* ============ DATA HEALTH BANNER ============ */
.health-banner{display:flex;gap:12px;margin-bottom:20px;flex-wrap:wrap}
.health-item{display:flex;align-items:center;gap:8px;background:var(--card);padding:10px 16px;border-radius:8px;border:1px solid var(--border);font-size:13px}
.health-item.clickable{cursor:pointer;transition:all 0.2s}
.health-item.clickable:hover{border-color:var(--accent);background:rgba(59,130,246,0.1)}
.health-icon{font-size:16px}
.health-label{color:var(--muted)}
.health-value{color:white;font-weight:600}
.health-item.warning{border-color:var(--yellow);background:rgba(251,191,36,0.1)}
.health-item.warning .health-value{color:var(--yellow)}
.health-item.success{border-color:var(--green)}
.health-item.success .health-value{color:var(--green)}

/* ============ SAVED FILTERS ============ */
.saved-filters{margin-top:16px;padding-top:12px;border-top:1px solid var(--border)}
.saved-filters h5{margin:0 0 8px 0;font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:0.5px}
#savedFiltersList{display:flex;flex-direction:column;gap:4px}
.saved-filter-item{display:flex;align-items:center;justify-content:space-between;padding:6px 8px;background:var(--bg);border-radius:4px;cursor:pointer;transition:all 0.15s}
.saved-filter-item:hover{background:var(--card-hover)}
.saved-filter-item .filter-name{font-size:12px;color:var(--muted);flex:1}
.saved-filter-item .filter-delete{font-size:10px;color:var(--red);opacity:0;padding:2px 4px;cursor:pointer}
.saved-filter-item:hover .filter-delete{opacity:1}

/* ============ DUPLICATES MODAL ============ */
.duplicates-list{max-height:400px;overflow-y:auto}
.duplicate-group{background:var(--bg);border-radius:8px;padding:16px;margin-bottom:12px;border:1px solid var(--border)}
.duplicate-group-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.duplicate-group-header strong{color:white;font-size:14px}
.duplicate-group-header .count-badge{background:var(--yellow);color:#000;padding:2px 8px;border-radius:10px;font-size:11px;font-weight:600}
.duplicate-item{display:flex;align-items:center;gap:12px;padding:10px;background:var(--card);border-radius:6px;margin-bottom:6px}
.duplicate-item:last-child{margin-bottom:0}
.duplicate-item input[type="radio"]{accent-color:var(--accent)}
.duplicate-item-info{flex:1}
.duplicate-item-info .amount{font-weight:600;color:white}
.duplicate-item-info .date{font-size:12px;color:var(--muted)}
.duplicate-actions{display:flex;gap:8px;margin-top:12px}

/* ============ CATEGORY DRILLDOWN DRAWER ============ */
.drawer{position:fixed;top:0;right:0;height:100vh;width:400px;max-width:90vw;background:var(--card);border-left:1px solid var(--border);z-index:200;box-shadow:-4px 0 20px rgba(0,0,0,0.3)}
.drawer-content{display:flex;flex-direction:column;height:100%}
.drawer-header{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid var(--border)}
.drawer-header h3{margin:0;font-size:18px;color:white}
.drawer-body{flex:1;overflow-y:auto;padding:20px}
.drilldown-summary{display:flex;gap:20px;margin-bottom:24px}
.drilldown-stat{text-align:center;flex:1;padding:16px;background:var(--bg);border-radius:8px}
.drilldown-stat .stat-value{display:block;font-size:24px;font-weight:700;color:white}
.drilldown-stat .stat-label{font-size:12px;color:var(--muted);margin-top:4px}
.drilldown-section{margin-bottom:24px}
.drilldown-section h4{margin:0 0 12px 0;font-size:14px;color:var(--muted);text-transform:uppercase;letter-spacing:0.5px}
.merchant-breakdown{display:flex;flex-direction:column;gap:8px}
.merchant-item{display:flex;align-items:center;gap:12px;padding:10px;background:var(--bg);border-radius:6px}
.merchant-item .merchant-name{flex:1;font-size:14px;color:white}
.merchant-item .merchant-amount{font-weight:600;color:var(--accent)}
.merchant-item .merchant-count{font-size:11px;color:var(--muted)}
.merchant-bar{height:4px;background:var(--border);border-radius:2px;margin-top:6px}
.merchant-bar-fill{height:100%;background:var(--accent);border-radius:2px}
.recent-list-mini{display:flex;flex-direction:column;gap:6px}
.recent-mini-item{display:flex;justify-content:space-between;align-items:center;padding:8px 10px;background:var(--bg);border-radius:4px;font-size:13px}
.recent-mini-item .merchant{color:var(--muted)}
.recent-mini-item .amount{font-weight:500;color:white}
.recent-mini-item .amount.debit{color:var(--red)}
.recent-mini-item .amount.credit{color:var(--green)}

/* Modal small variant */
.modal-sm{max-width:380px}
.modal-sm .modal-txn-info{background:var(--bg);padding:12px;border-radius:8px;margin-bottom:16px;font-size:13px;color:var(--muted)}
.modal-sm .modal-txn-info strong{color:white}

/* ============ MANUAL ENTRY MODAL ============ */
.modal-row-2col{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.modal-row textarea{width:100%;padding:10px 12px;border-radius:8px;border:1px solid var(--border);background:var(--bg);color:var(--muted);resize:vertical;font-family:inherit;transition:all 0.2s}
.modal-row textarea:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px var(--glow)}
.modal-row input[type="datetime-local"]{width:100%;padding:10px 12px;border-radius:8px;border:1px solid var(--border);background:var(--bg);color:var(--muted);font-family:inherit}
.modal-row input[type="datetime-local"]:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px var(--glow)}

/* Transaction badges */
.txn-badges{display:inline-flex;align-items:center;gap:6px;margin-left:8px}
.manual-badge{display:inline-block;background:var(--purple);color:white;padding:2px 6px;border-radius:4px;font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.3px}
.status-badge{display:inline-flex;align-items:center;justify-content:center;width:18px;height:18px;border-radius:50%;font-size:10px}
.status-reviewed{background:rgba(16,185,129,0.2);color:var(--green)}

/* Notes tooltip */
.note-preview{display:inline-block;max-width:100px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:11px;color:var(--yellow);background:rgba(251,191,36,0.1);padding:2px 6px;border-radius:4px;cursor:help;margin-left:6px}
.note-preview:hover{max-width:none;position:relative;z-index:10;background:var(--yellow);color:#000}

/* ============ RECURRING TRANSACTIONS ============ */
.recurring-list{display:flex;flex-direction:column;gap:12px}
.recurring-item{background:var(--bg);border-radius:12px;padding:16px;border:1px solid var(--border);transition:all 0.2s}
.recurring-item:hover{border-color:var(--accent);transform:translateY(-2px)}
.recurring-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.recurring-merchant{font-weight:600;color:white;font-size:15px}
.recurring-pattern{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;border-radius:20px;font-size:12px;font-weight:500}
.recurring-pattern.weekly{background:rgba(139,92,246,0.2);color:var(--purple)}
.recurring-pattern.bi-weekly{background:rgba(59,130,246,0.2);color:var(--accent)}
.recurring-pattern.monthly{background:rgba(16,185,129,0.2);color:var(--green)}
.recurring-pattern.bi-monthly{background:rgba(251,191,36,0.2);color:var(--yellow)}
.recurring-pattern.quarterly{background:rgba(245,158,11,0.2);color:var(--orange)}
.recurring-stats{display:flex;gap:24px;margin-bottom:12px}
.recurring-stat{text-align:center}
.recurring-stat-value{display:block;font-size:16px;font-weight:600;color:white}
.recurring-stat-label{font-size:11px;color:var(--muted);text-transform:uppercase;letter-spacing:0.5px}
.recurring-next{display:flex;align-items:center;gap:8px;padding:10px;background:rgba(59,130,246,0.1);border-radius:8px;font-size:13px}
.recurring-next .icon{font-size:16px}
.recurring-next .label{color:var(--muted)}
.recurring-next .date{color:white;font-weight:500}
.recurring-confidence{display:flex;align-items:center;gap:8px;margin-top:10px;font-size:12px;color:var(--muted)}
.confidence-bar{flex:1;height:6px;background:var(--border);border-radius:3px;overflow:hidden}
.confidence-fill{height:100%;border-radius:3px;transition:width 0.3s}
.confidence-fill.high{background:var(--green)}
.confidence-fill.medium{background:var(--yellow)}
.confidence-fill.low{background:var(--orange)}

/* ============ MONTH-OVER-MONTH COMPARISON ============ */
.mom-controls{display:flex;align-items:center;gap:12px}
.mom-controls select{padding:8px 12px;border-radius:8px;border:1px solid var(--border);background:var(--bg);color:var(--muted);font-size:13px}
.mom-controls select:focus{outline:none;border-color:var(--accent)}
.mom-controls span{color:var(--muted);font-size:13px}

.mom-summary{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:24px;padding:20px;background:var(--bg);border-radius:12px}
.mom-summary-item{text-align:center}
.mom-summary-label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px;text-transform:uppercase;letter-spacing:0.5px}
.mom-summary-value{font-size:24px;font-weight:700;color:white}
.mom-summary-value.up{color:var(--red)}
.mom-summary-value.down{color:var(--green)}
.mom-summary-subtext{font-size:12px;color:var(--muted);margin-top:4px}

.mom-grid{display:flex;flex-direction:column;gap:8px}
.mom-row{display:grid;grid-template-columns:1fr 100px 100px 80px 120px;align-items:center;padding:14px 16px;background:var(--bg);border-radius:8px;gap:12px;font-size:14px}
.mom-row.header{background:transparent;font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:0.5px;padding:8px 16px}
.mom-category{font-weight:500;color:white}
.mom-amount{text-align:right;font-weight:500}
.mom-change{text-align:right;font-weight:600}
.mom-change.positive{color:var(--red)}
.mom-change.negative{color:var(--green)}
.mom-change.neutral{color:var(--muted)}
.mom-bar{height:8px;background:var(--border);border-radius:4px;overflow:hidden;position:relative}
.mom-bar-fill{height:100%;border-radius:4px;position:absolute;top:0}
.mom-bar-fill.month1{background:var(--accent)}
.mom-bar-fill.month2{background:var(--purple);opacity:0.6}

/* ============ KEYBOARD SHORTCUTS ============ */
#txTable tbody tr.keyboard-selected{background:rgba(59,130,246,0.15);outline:2px solid var(--accent);outline-offset:-2px}
#txTable tbody tr.keyboard-selected td{background:transparent}

.shortcuts-modal .modal-content{max-width:480px}
.shortcuts-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.shortcut-item{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;background:var(--bg);border-radius:8px}
.shortcut-key{background:var(--card);padding:4px 10px;border-radius:6px;font-family:monospace;font-size:13px;font-weight:600;color:var(--accent);border:1px solid var(--border)}
.shortcut-desc{font-size:13px;color:var(--muted)}

/* ============ SEARCH CLEAR BUTTON ============ */
.search-clear{position:absolute;right:10px;top:50%;transform:translateY(-50%);background:var(--muted-dim);color:var(--bg);border:none;border-radius:50%;width:18px;height:18px;font-size:14px;line-height:1;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s}
.search-clear:hover{background:var(--red);color:white}

/* ============ UNDO TOAST ============ */
.toast-undo{background:var(--card);min-width:280px}
.toast-undo-btn{margin-left:auto;padding:6px 14px;border-radius:6px;border:1px solid var(--accent);background:transparent;color:var(--accent);cursor:pointer;font-weight:600;font-size:12px;transition:all 0.2s}
.toast-undo-btn:hover{background:var(--accent);color:white}
.toast-countdown{position:absolute;bottom:0;left:0;right:0;height:3px;background:var(--border)}
.toast-countdown-fill{height:100%;background:var(--accent);animation:countdown 5s linear forwards}
@keyframes countdown{from{width:100%}to{width:0%}}
.toast-action{margin-left:auto;padding:6px 12px;border-radius:6px;border:none;background:var(--accent);color:white;cursor:pointer;font-weight:500;font-size:12px}

/* ============ BATCH ACTION BAR ============ */
.batch-action-bar{position:fixed;bottom:-80px;left:50%;transform:translateX(-50%);background:linear-gradient(135deg,var(--card),#1f1f24);padding:14px 24px;border-radius:16px;display:flex;align-items:center;gap:16px;box-shadow:0 8px 32px rgba(0,0,0,0.4);border:1px solid var(--border);z-index:1000;transition:bottom 0.3s ease}
.batch-action-bar.visible{bottom:24px}
.batch-count{font-weight:600;color:white;font-size:14px}
.batch-actions{display:flex;gap:10px}
.batch-select{padding:8px 12px;border-radius:8px;border:1px solid var(--border);background:var(--bg);color:var(--muted);font-size:13px;cursor:pointer}
.batch-select:hover{border-color:var(--accent)}
.batch-btn{padding:8px 14px;border-radius:8px;border:none;cursor:pointer;font-weight:500;font-size:13px;transition:all 0.2s}
.batch-btn-danger{background:rgba(239,68,68,0.2);color:var(--red)}
.batch-btn-danger:hover{background:var(--red);color:white}
.batch-close{background:transparent;border:none;color:var(--muted);font-size:20px;cursor:pointer;padding:4px 8px;margin-left:8px}
.batch-close:hover{color:white}

/* ============ MINI COMPARISON (COMPACT) ============ */
.mini-compare{display:flex;align-items:center;gap:12px;padding:6px 12px;background:var(--card);border-radius:8px;border:1px solid var(--border);font-size:12px}
.mc-item{display:flex;flex-direction:column;align-items:center;gap:2px;min-width:55px}
.mc-label{font-size:9px;color:var(--muted-dim);text-transform:uppercase;letter-spacing:0.5px}
.mc-value{font-weight:600;color:white}
.mc-value.muted{color:var(--muted)}
.mc-diff{font-size:11px;font-weight:700;padding:3px 6px;border-radius:4px;margin-left:4px}
.mc-diff.diff-up{color:var(--red);background:rgba(239,68,68,0.15)}
.mc-diff.diff-down{color:var(--green);background:rgba(16,185,129,0.15)}

/* Drilldown filter button */
.drilldown-filter-btn{width:100%;margin-bottom:16px;padding:12px}

/* ============ EMPTY STATES ============ */
.empty-cell{padding:60px 20px !important;text-align:center}
.empty-state{display:flex;flex-direction:column;align-items:center;gap:12px;padding:40px 20px}
.empty-icon{font-size:48px;opacity:0.8}
.empty-title{font-size:18px;font-weight:600;color:white;margin:0}
.empty-message{font-size:14px;color:var(--muted);margin:0}
.empty-state .btn-accent{margin-top:8px}

/* ============ WELCOME MODAL ============ */
.welcome-modal{max-width:520px;text-align:center}
.welcome-header{padding-bottom:20px;border-bottom:1px solid var(--border);margin-bottom:20px}
.welcome-icon{font-size:48px;display:block;margin-bottom:12px}
.welcome-header h2{margin:0 0 8px 0;font-size:24px;background:linear-gradient(135deg,#fbbf24 0%,#f59e0b 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.welcome-subtitle{color:var(--muted);margin:0;font-size:14px}
.welcome-body{text-align:left}
.welcome-step{display:flex;gap:16px;margin-bottom:20px;align-items:flex-start}
.step-num{width:32px;height:32px;background:linear-gradient(135deg,var(--accent),#6366f1);border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;color:white;flex-shrink:0}
.step-content strong{display:block;color:white;margin-bottom:4px}
.step-content p{margin:0;color:var(--muted);font-size:14px}
.welcome-tips{background:var(--bg);padding:16px;border-radius:8px;margin-top:20px}
.welcome-tips h4{margin:0 0 12px 0;font-size:14px;color:var(--yellow)}
.welcome-tips ul{margin:0;padding-left:20px;font-size:13px;color:var(--muted)}
.welcome-tips li{margin-bottom:8px}
.welcome-tips kbd{background:var(--card);padding:2px 6px;border-radius:4px;font-size:12px;font-family:monospace;border:1px solid var(--border)}
.welcome-actions{display:flex;justify-content:space-between;align-items:center;margin-top:24px;padding-top:20px;border-top:1px solid var(--border)}
.dont-show-again{display:flex;align-items:center;gap:8px;font-size:13px;color:var(--muted);cursor:pointer}
.dont-show-again input{cursor:pointer}
.btn-lg{padding:14px 28px;font-size:16px}